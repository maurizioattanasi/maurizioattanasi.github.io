---
layout: post
title: ".NET Core IoT Libraries on Friendly ELEC NanoPi M1 Plus"
date: '2020-04-14T19:19:00.000+02:00'
author: Maurizio Attanasi
tags:
- ARM
- Linux
- macOs
- IDE
- IoT
- Windows 10
- Visual Studio Code
- ".NET Core"
- vsdbg
modified_time: '2020-04-14T19:22:06.915+02:00'
thumbnail: https://1.bp.blogspot.com/-v3upCyek1Js/XpSt0Eig-0I/AAAAAAAAMEo/faR7FPJr8AcXd59YuGESgPKaEqsdCfGDwCKgBGAsYHg/s72-c/IMG_20200413_185526.jpg
blogger_id: tag:blogger.com,1999:blog-2699321970282050013.post-7504310496984464735
blogger_orig_url: https://maurizioattanasi.blogspot.com/2020/04/net-core-iot-libraries-on-friendly-elec.html
---

<div>In the wake of the previous note, <a href="https://maurizioattanasi.blogspot.com/2020/04/set-up-net-core-31-arm-development.html">Set Up .NET             Core 3.1 ARM Development Toolchain with Visual Studio Code</a>, this time the goal is to check whether <a href="https://github.com/dotnet/iot" target="_blank">Microsoft's .NET Core IoT Libraries</a> works also with         the <a href="https://www.friendlyarm.com/index.php?route=product/product&amp;product_id=176&amp;search=nanopi+m1+plus&amp;description=true&amp;category_id=0&amp;sub_category=true" target="_blank">NanoPi M1 Plus</a> even if this device is not in the list of supported devices.         <br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-v3upCyek1Js/XpSt0Eig-0I/AAAAAAAAMEo/faR7FPJr8AcXd59YuGESgPKaEqsdCfGDwCKgBGAsYHg/s1600/IMG_20200413_185526.jpg" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="1600" data-original-width="1200" height="320" src="https://1.bp.blogspot.com/-v3upCyek1Js/XpSt0Eig-0I/AAAAAAAAMEo/faR7FPJr8AcXd59YuGESgPKaEqsdCfGDwCKgBGAsYHg/s320/IMG_20200413_185526.jpg" width="240" /></a></div></div><br /><div>Following         the instructions in the&nbsp;<a href="https://github.com/dotnet/iot/blob/master/samples/led-blink/README.md" target="_blank">led-blink</a>        sample, we will connect pin 17 (GPIOA17) to the cathode of a LED interposing a resistor, and pin 39 (GND) to the         anode.     </div><br /><div style="background-color: #f7f5f5; border: 1px dashed #e0e0e0; height: auto; overflow: auto; width: auto;"><pre>    class Program<br />            {<br />                static void Main(string[] args)<br />                {<br />                    var pin = 17;<br />                    var lightTimeInMilliseconds = 1000;<br />                    var dimTimeInMilliseconds = 200;<br />        <br />                    Console.WriteLine($"Let's blink an LED!");<br />                    using (GpioController controller = new GpioController())<br />                    {<br />                        controller.OpenPin(pin, PinMode.Output);<br />                        Console.WriteLine($"GPIO pin enabled for use: {pin}");<br />        <br />                        Console.CancelKeyPress += (object sender, ConsoleCancelEventArgs eventArgs) =&gt;<br />                        {<br />                            controller.Dispose();<br />                        };<br />        <br />                        while (true)<br />                        {<br />                            Console.WriteLine($"Light for {lightTimeInMilliseconds}ms");<br />                            controller.Write(pin, PinValue.High);<br />                            Thread.Sleep(lightTimeInMilliseconds);<br />                            Console.WriteLine($"Dim for {dimTimeInMilliseconds}ms");<br />                            controller.Write(pin, PinValue.Low);<br />                            Thread.Sleep(dimTimeInMilliseconds);<br />                        }<br />                    }<br />                }<br />                </pre></div><br /><div>The code above, copied and pasted from the sample, is self-explanatory, in fact</div><ol><li>            <div>we select pin 17 and configure it as an output</div><br />            <div style="background-color: #f7f5f5; border: 1px dashed #e0e0e0; height: auto; overflow: auto; width: auto;"><pre>controller.OpenPin(pin, PinMode.Output);</pre></div></li><br /><li>            <div>turn the LED on for 1 second</div><br />            <div style="background-color: #f7f5f5; border: 1px dashed #e0e0e0; height: auto; overflow: auto; width: auto;"><pre>                    controller.Write(pin, PinValue.High);<br />                            Thread.Sleep(lightTimeInMilliseconds);<br />                        </pre></div></li><br /><li>            <div>then we turn it off for 200 ms</div><br />            <div style="background-color: #f7f5f5; border: 1px dashed #e0e0e0; height: auto; overflow: auto; width: auto;"><pre>                    controller.Write(pin, PinValue.Low);<br />                            Thread.Sleep(dimTimeInMilliseconds);                    <br />                        </pre></div><br />        </li><li>            <div>repeat from point 1.</div></li></ol><div>As we've done in the previous note, we will configure our tasks.json and launch.json files in order to allow         remote debugging via ssh</div><br /><div>Only one <em>caveat</em> has to be considered this time in order to allow vsdg to change the mode of a pin.     </div><div>In fact, this operation requires root permissions, and to get this result, one possible way is to prepend <span style="font-family: &quot;courier new&quot;;">sudo</span> before the <span style="font-family: &quot;courier new&quot;;">vsdbg</span> path in the <em>launch.json</em> configuration.     </div><br /><div style="background-color: #f7f5f5; border: 1px dashed #e0e0e0; height: auto; overflow: auto; width: auto;"><pre>            "debuggerPath": "sudo ~/vsdbg/vsdbg"<br />                </pre></div><br /><div>The following video shows a remote debug test of the program, and demonstrate that.         <br /><ul><li>The Microsoft .NET Core IoT Libraries works as expected;</li><li>We are able to use the remote debugger stopping code execution at our breakpoints</li></ul></div><br /><div class="separator" style="clear: both; text-align: center;"><iframe allowfullscreen="" class="YOUTUBE-iframe-video" data-thumbnail-src="https://i.ytimg.com/vi/YeKE1-znQr0/0.jpg" frameborder="0" height="266" src="https://www.youtube.com/embed/YeKE1-znQr0?feature=player_embedded" width="320"></iframe></div><br /><div>The code of this note is available <a href="https://github.com/alien70/vscode-arm-c-sharp-toolchain">here</a> on         my Github repo.     </div><br /><div>As always<br /><br />Enjoy,<br /><br />and if we are still under COVID-19 attack, #staysafe, #StayAtHome.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-VPpx7wpWqMk/Xom1ZaYbINI/AAAAAAAALmU/srDW2xp9I_kHGJHP2J_Q2QE4-APN0vPZQCLcBGAsYHQ/s1600/stay-at-home_2x.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="600" data-original-width="800" height="240" src="https://1.bp.blogspot.com/-VPpx7wpWqMk/Xom1ZaYbINI/AAAAAAAALmU/srDW2xp9I_kHGJHP2J_Q2QE4-APN0vPZQCLcBGAsYHQ/s320/stay-at-home_2x.png" width="320" /></a></div><br /></div>