---
layout: post
title: RESTful API con Swagger
date: '2016-12-28T13:29:00.001+01:00'
author: Maurizio Attanasi
tags:
- ".NET"
- Programmazione
- REST
modified_time: '2016-12-28T15:38:34.883+01:00'
blogger_id: tag:blogger.com,1999:blog-2699321970282050013.post-7597580260274370583
blogger_orig_url: https://maurizioattanasi.blogspot.com/2016/12/restful-api-con-swaggermd.html
---

Oggetto di questa nota sarà <a href="http://swagger.io/">swagger</a>, un set di strumenti e di specifiche&nbsp;<em>Open Source</em>&nbsp;che stanno diventando lo <em>Standard de facto</em> per quel che riguarda l’implementazione e la documentazione di un’<strong>API RESTful</strong>.<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://swagger.io/" style="margin-left: 1em; margin-right: 1em;"><img alt="Swagger" height="97" src="https://drive.google.com/uc?id=0BzugrVNPI3_rWmM1RzhoemsxX3M" style="background: black;" title="" width="400" /></a></div><br />Per comprendere cosa swagger sia e quale utilità abbia nel processo di sviluppo di una API, esistono in rete molti articoli, tra i quali&nbsp;<a href="https://www.ibuildings.it/it/blog/api-con-swagger-5-minuti">API con Swagger in 5 minuti</a>,&nbsp;<a href="http://swagger.io/specification/">Swagger specification</a>, e via dicendo.<br /><br />Seguendo lo spirito del blog, invece, utilizzerò questo post per memorizzare una possibile serie di passi per introdurre l’utilizzo dello strumento in una <strong>Web API</strong> sviluppata con il framework <strong>ASP.NET Core</strong>. <br /><br />A tal fine partiremo da uno dei progetti sviluppati a titolo di esempio nei post precedenti, e pubblicati su <a href="https://portal.azure.com/#">Azure</a>. <br /><br />Tra i possibili strumenti per l’integrazione di <strong>swagger</strong> nel nostro processo, ci serviremo di <a href="https://github.com/domaindrivendev/Swashbuckle">Swashbuckle</a>. <br />In primo luogo, aggiungiamo al file <em>project.json</em> del nostro progetto, la dipendenza alla versione attuale di <em>Swashbuckle</em>.<br /><pre class="prettyprint"><code class="language-javascript hljs ">...<br /><span class="hljs-string">"Swashbuckle"</span>: <span class="hljs-string">"6.0.0-beta901"</span>,<br />...</code></pre>Quindi, configuriamo la nostra <b>App</b> affinché faccia uso dello strumento in questione, aggiungendo nel metodo <i>ConfigureServices</i>, le seguenti righe:<br /><br /><pre class="prettyprint"><code class="language-c# hljs php">            <span class="hljs-comment">// Inject an implementation of ISwaggerProvider with defaulted settings applied</span><br />            services.AddSwaggerGen();<br /><br />            services.ConfigureSwaggerGen(options =&gt;<br />            {<br />                options.SingleApiVersion(<span class="hljs-keyword">new</span> Info<br />                {<br />                    Version = <span class="hljs-string">"v1"</span>,<br />                    Title = <span class="hljs-string">"BookStore API"</span>,<br />                    Description = <span class="hljs-string">"A sample API  for swagger usage demonstration"</span>,<br />                    TermsOfService = <span class="hljs-string">"None"</span>,<br />                    Contact = <span class="hljs-keyword">new</span> Contact() { Name = <span class="hljs-string">"Maurizio Attanasi"</span>, Email = <span class="hljs-string">""</span>, Url = <span class="hljs-string">"https://maurizioattanasi.blogspot.it/"</span> },<br />                    License = <span class="hljs-keyword">new</span> License() { Name = <span class="hljs-string">"Creative Commons Attribution 4.0"</span>, Url = <span class="hljs-string">"https://creativecommons.org/licenses/by/4.0/"</span> }<br />                });<br /><br />                <span class="hljs-comment">//Determine base path for the application.</span><br />                <span class="hljs-keyword">var</span> basePath = PlatformServices.<span class="hljs-keyword">Default</span>.Application.ApplicationBasePath;<br /><br />                <span class="hljs-comment">//Set the comments path for the swagger json and ui.</span><br />                <span class="hljs-keyword">var</span> xmlPath = Path.Combine(basePath, <span class="hljs-string">"BookApi.xml"</span>);<br />                <span class="hljs-comment">// options.IncludeXmlComments(xmlPath);</span><br />            });        </code></pre><br />Infine, nel metodo <i>Configure</i>, subito dopo aver <i>avviato</i>&nbsp;il pattern MVC, configuriamo l’uso sia di Swagger che della sua interfaccia utente:       <br /><br /><pre class="prettyprint"><code class="language-C# hljs avrasm">            app<span class="hljs-preprocessor">.UseMvc</span>()<span class="hljs-comment">;</span><br /><br />            // Enable middleware to serve generated Swagger as a JSON endpoint<br />            app<span class="hljs-preprocessor">.UseSwagger</span>()<span class="hljs-comment">;</span><br /><br />            // Enable middleware to serve swagger-ui assets (HTML, JS, CSS etc.)<br />            app<span class="hljs-preprocessor">.UseSwaggerUi</span>()<span class="hljs-comment">;</span></code></pre><pre class="prettyprint"><code class="language-C# hljs avrasm"><span class="hljs-comment"><br /></span></code></pre>Avviata la web application, e navigando all’indirizzo <a href="http://your-root-url/swagger/ui" target="_blank">your-root-url/swagger/ui</a>, nel nostro caso <a href="http://talking-things-api.azurewebsites.net/swagger/ui/index.html#/" target="_blank">http://talking-things-api.azurewebsites.net/swagger/ui/</a>, visualizzeremo la pagina di documentazione autogenerata<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://drive.google.com/uc?id=0BzugrVNPI3_raGNHSU1oT2p2bzA" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="259" src="https://drive.google.com/uc?id=0BzugrVNPI3_raGNHSU1oT2p2bzA" width="320" /></a></div><br />&nbsp;Degno di nota è anche il fatto che la pagina fornisce anche un client che consente di testare il servizio senza ricorrere a tool esterni quali <a href="https://www.getpostman.com/" target="_blank">Postman</a>&nbsp;o <a href="http://www.telerik.com/fiddler" target="_blank">Fiddler</a>. Espandendo infatti uno dei verbi visualizzati nella pagina, ed agendo sul pulsante <b><i>Try it out</i></b>, abbiamo<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://drive.google.com/uc?id=0BzugrVNPI3_rSTBFTFlKMHRXazg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="259" src="https://drive.google.com/uc?id=0BzugrVNPI3_rSTBFTFlKMHRXazg" width="320" /></a></div><br />Enjoy.<br /><br /><div style="text-align: left;"><div style="display: inline-block;"><script data-counter="right" data-url="https://maurizioattanasi.blogspot.it/2016/12/restful-api-con-swaggermd.html" type="IN/Share"></script><br /></div><div class="g-plusone" data-annotation="inline" data-width="300" style="display: inline-block;"></div></div>