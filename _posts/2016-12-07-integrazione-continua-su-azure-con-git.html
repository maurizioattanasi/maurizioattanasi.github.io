---
layout: post
title: Integrazione Continua su Azure con git e azure-cli (parte II)
date: '2016-12-07T15:54:00.001+01:00'
author: Maurizio Attanasi
tags:
- Azure
- Continuous Integration
- node.js
- Angular 2
modified_time: '2016-12-07T16:36:04.122+01:00'
thumbnail: https://2.bp.blogspot.com/-EnQ6v-7X6qA/WEgsXPS34lI/AAAAAAAAGrE/gN3p6KafXTorHLWmKdE7H8bPfv7aaanCgCK4B/s72-c/Schermata%2B2016-12-07%2Balle%2B16.35.21.png
blogger_id: tag:blogger.com,1999:blog-2699321970282050013.post-1982800096317244569
blogger_orig_url: https://maurizioattanasi.blogspot.com/2016/12/integrazione-continua-su-azure-con-git.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://angular.io/" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"></a><br /></div><a href="https://angular.io/" style="clear: right; float: right; margin-bottom: 1em; margin-left: 1em;"><img alt="Node.js" height="129" src="https://drive.google.com/uc?id=0BzugrVNPI3_rUGZvMG1zX2FaWFk" title="" width="200" /></a><a href="https://azure.microsoft.com/" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img alt="Micorsoft Azure" height="200" src="https://drive.google.com/uc?id=0BzugrVNPI3_rRkxZWjh0ejVWS2M" title="" width="200" /></a><a href="https://drive.google.com/uc?id=0BzugrVNPI3_rdFY1ZVlGT2ZPdWs" imageanchor="1"><img alt="Angular 2" border="0" height="119" src="https://drive.google.com/uc?id=0BzugrVNPI3_rdFY1ZVlGT2ZPdWs" title="" width="200" /></a><br /><br /><br /><br /><br /><br /><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Continuiamo la precedente nota su <a href="https://maurizioattanasi.blogspot.it/2016/11/integrazione-continua-su-azure-con-git_28.html">Integrazione Continua su Azure con git e azure-cli</a>, nella quale ho illustrato una possibile procedura per l’implementazione di un ambiente di sviluppo per l’integrazione continua su <a href="https://azure.microsoft.com/">Microsoft Azure</a>. In quell’occasione il progetto pubblicato implementava sia la gestione del front-end (sviluppato in quell’occasione con un’applicazione <a href="https://angular.io/">Angular 2</a>), che il back-end (implementato con <a href="https://www.asp.net/core">ASP.NET Core</a>) implementata su host IIS. </div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">In questo post concentreremo la nostra attenzione solo sulla pubblicazione di una <strong>Web App</strong> <a href="https://angular.io/">Angular 2</a> implementata con <a href="https://nodejs.org/it/">Node.js</a>. A tal fine ci avvarremo di <a href="https://cli.angular.io/">angular-cli</a>, un set di strumenti in linea di comando per lo sviluppo di un'app&nbsp;<a href="https://angular.io/">Angular 2</a>.</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://cli.angular.io/" style="margin-left: 1em; margin-right: 1em;"><img alt="angular-cli" height="94" src="https://drive.google.com/uc?id=0BzugrVNPI3_rclJtUy1RVjRfRW8" title="" width="320" /></a></div><h2 id="creazione-della-web-app">Creazione della Web App</h2>Seguendo le istruzioni riportate dal sito creiamo una Web App <strong>Angular 2</strong> con <strong>angular-cli</strong>. <br /><ol><li>In primo luogo installiamo sul nostro sistema angular-cli:</li><pre class="prettyprint"><code class=" hljs lasso">$ npm install <span class="hljs-attribute">-g</span> angular<span class="hljs-attribute">-cli</span></code></pre><li>Quindi creiamo la nostra Web App:</li><pre class="prettyprint"><code class=" hljs lasso">$ ng <span class="hljs-literal">new</span> my<span class="hljs-attribute">-a2</span><span class="hljs-attribute">-app</span></code></pre><li>Personalizziamone il contenuto, modificando: <br /><ul><li>il file <strong>app.component.ts</strong></li></ul></li><pre class="prettyprint"><code class="language-typescript hljs coffeescript"><span class="hljs-reserved">import</span> { Component } from <span class="hljs-string">'@angular/core'</span>;<br /><br /><span class="hljs-property">@Component</span>({<br />  <span class="hljs-attribute">selector</span>: <span class="hljs-string">'app-root'</span>,<br />  <span class="hljs-attribute">templateUrl</span>: <span class="hljs-string">'./app.component.html'</span>,<br />  <span class="hljs-attribute">styleUrls</span>: [<span class="hljs-string">'./app.component.css'</span>]<br />})<br /><span class="hljs-reserved">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppComponent</span> {</span><br />  title = <span class="hljs-string">'my angular 2 app!'</span>;<br />  sign = <span class="hljs-string">'Maurizio Attanasi'</span>;<br />  year = <span class="hljs-string">'2016'</span>;<br />}</code></pre><ul><li>il file <strong>app.component.html<br /><a href="http://2.bp.blogspot.com/-EnQ6v-7X6qA/WEgsXPS34lI/AAAAAAAAGrE/gN3p6KafXTorHLWmKdE7H8bPfv7aaanCgCK4B/s1600/Schermata%2B2016-12-07%2Balle%2B16.35.21.png" imageanchor="1"><img border="0" src="https://2.bp.blogspot.com/-EnQ6v-7X6qA/WEgsXPS34lI/AAAAAAAAGrE/gN3p6KafXTorHLWmKdE7H8bPfv7aaanCgCK4B/s400/Schermata%2B2016-12-07%2Balle%2B16.35.21.png" /></a></strong></li></ul><li>Avviamo il server in locale con il comando</li><pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>ng serve</code></pre><div style="text-align: center;"><img alt="ng-serve-terminal" height="273" src="https://drive.google.com/uc?id=0BzugrVNPI3_rOVp5d3Z5UlJwVU0" title="" width="400" /> </div><div style="text-align: center;"><img alt="localhost-run" height="296" src="https://drive.google.com/uc?id=0BzugrVNPI3_rUllrd2lDUFdDU28" title="" width="400" />.</div><li style="text-align: justify;">Aggiungiamo nella directory root del progetto il file <strong>.deployment</strong> che configurerà la directory di avvio del progetto, e contenente le righ che seguono:</li></ol><pre class="prettyprint"><div style="text-align: justify;"><br />[config]</div><br /><code class=" hljs ini"><div style="text-align: justify;"><br />project = <span class="hljs-value">dist</span></div><br /></code></pre><h2 id="preparazione-e-pubblicazione-della-web-app-su-azure">Preparazione e pubblicazione della Web App su azure</h2><ol><li>Utilizzando le funzionalità di <strong>azure-cli</strong> viste nel post precedente, creiamo la Web App</li><pre class="prettyprint" style="text-align: justify;"><code class=" hljs brainfuck"><span class="hljs-comment">$</span> <span class="hljs-comment">azure</span> <span class="hljs-comment">site</span> <span class="hljs-comment">create</span> <span class="hljs-comment">my</span><span class="hljs-literal">-</span><span class="hljs-comment">a2</span><span class="hljs-literal">-</span><span class="hljs-comment">app</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">git</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">gitusername</span> <span class="hljs-comment">***</span></code></pre><li style="text-align: justify;">Aggiorniamo le modifiche del repository locale, eseguiamo il <strong>commit</strong> ed infine eseguiamo il <strong>push</strong> verso il repository remoto di azure</li></ol><pre class="prettyprint"><div style="text-align: justify;"><br /><span class="hljs-variable">$ </span>git add .</div><br /><code class=" hljs ruby"><div style="text-align: justify;"><br /><span class="hljs-variable">$ </span>git commit -m <span class="hljs-string">"Initial commit"</span></div><br /><span class="hljs-variable"><div style="text-align: justify;"><br /><span class="hljs-variable">$ </span>git push azure master</div><br /></span></code></pre><div style="text-align: justify;">Se la è andata a buon fine, la nostra shell di comando sarà simile a quella seguente  </div><div style="text-align: center;"><img alt="azure-deployment-terminal" height="274" src="https://drive.google.com/uc?id=0BzugrVNPI3_rQmpIWlpHaGdDUnc" title="" width="400" /> </div><div style="text-align: justify;">Ulteriore conferma dell’avvenuta pubblicazione possiamo averla navigando il portale di azure al percoso <strong>my-a2-app &gt; Deployment options</strong> </div><div style="text-align: center;"><img alt="azure-deployment-options" height="355" src="https://drive.google.com/uc?id=0BzugrVNPI3_rUHNBeEdZV2RDazA" title="" width="400" /> </div><div style="text-align: justify;">Ed infine, raggiungendo l’indirizzo <a href="http://my-a2-app.azurewebsites.net/">http://my-a2-app.azurewebsites.net/</a> </div><div style="text-align: center;"><img alt="azure-run" height="284" src="https://drive.google.com/uc?id=0BzugrVNPI3_rVV9senNyOFdjQWc" title="" width="400" /> </div>Enjoy<br /><br /><div style="text-align: left;"><div style="display: inline-block;"><script data-counter="right" data-url="https://maurizioattanasi.blogspot.it/2016/12/integrazione-continua-su-azure-con-git.html" type="IN/Share"></script><br /></div><div class="g-plusone" data-annotation="inline" data-width="300" style="display: inline-block;"></div></div>